---
description: Сохранять review-changes (diff) после каждого изменения кода в папку reviews
alwaysApply: true
---

# Сохранение review-changes после изменений кода

## ⚠️ ОБЯЗАТЕЛЬНО — НЕ ПРОПУСКАТЬ

**При любом изменении кода или документации в этой сессии:**

1. **Перед** финальным ответом пользователю («Готово», «Итог» и т.п.) — сохрани артефакты ревью в `reviews/` (см. ниже).  
2. **Ответ с правками без сохранения в `reviews/` считается незавершённым.** Пользователю напоминать не нужно — выполнять всегда.

---

## Как сохранять

1. **Сохрани текущие изменения** в папку `reviews/` в двух видах:
   - **Markdown** (`reviews/YYYY-MM-DD-краткое-описание.md`): заголовок, дата, краткий контекст, блок с началом diff (```diff ... ```) и ссылка на полный .diff.
   - **Diff** (`reviews/YYYY-MM-DD-краткое-описание.diff`): полный вывод `git diff` в UTF-8.

2. **Имена**: дата + короткое описание, например `2026-02-21-phase2-run-id-errors-logging.md` / `.diff`.

3. **Получить diff** (PowerShell):  
   `git diff | Out-File -FilePath "reviews\имя.diff" -Encoding utf8`  
   В .md — заголовок, контекст, фрагмент diff и ссылка на этот .diff.

4. **Когда**: после завершения логического блока правок, **до** финального сообщения пользователю.
