diff --git a/logging_setup.py b/logging_setup.py
index fc09e74..204ea56 100644
--- a/logging_setup.py
+++ b/logging_setup.py
@@ -1,26 +1,58 @@
 """╨Э╨░╤Б╤В╤А╨╛╨╣╨║╨░ ╨╗╨╛╨│╨╕╤А╨╛╨▓╨░╨╜╨╕╤П ╨┐╤А╨╕╨╗╨╛╨╢╨╡╨╜╨╕╤П.
 
 ╨Ы╨╛╨│╨╕ ╨┐╨╕╤И╤Г╤В╤Б╤П ╨▓ ╨┐╨░╨┐╨║╤Г `logs/` ╤А╤П╨┤╨╛╨╝ ╤Б ╤Д╨░╨╣╨╗╨╛╨╝ ╨╕ ╤А╨╛╤В╨╕╤А╤Г╤О╤В╤Б╤П ╨┐╨╛ ╤А╨░╨╖╨╝╨╡╤А╤Г.
+╨Я╨╛╨┤╨┤╨╡╤А╨╢╨╕╨▓╨░╤О╤В╤Б╤П run_id (correlation id) ╨╕ error_code ╨▓ ╨║╨░╨╢╨┤╨╛╨╣ ╨╖╨░╨┐╨╕╤Б╨╕.
 """
 
 from __future__ import annotations
 
 import logging
 import time
+from contextvars import ContextVar
 from logging.handlers import RotatingFileHandler
 from pathlib import Path
+from typing import Optional
 
+# ╨Ъ╨╛╨╜╤В╨╡╨║╤Б╤В run_id ╨┤╨╗╤П ╤В╨╡╨║╤Г╤Й╨╡╨│╨╛ ╨╖╨░╨┐╤А╨╛╤Б╨░ (╤Г╤Б╤В╨░╨╜╨░╨▓╨╗╨╕╨▓╨░╨╡╤В╤Б╤П ╨▓ main()).
+_run_id_ctx: ContextVar[Optional[str]] = ContextVar("run_id", default=None)
 
-def setup_app_logging(logs_dir: Path, level: int = logging.INFO) -> None:
+
+def set_run_id(run_id: Optional[str]) -> None:
+    """╨г╤Б╤В╨░╨╜╨╛╨▓╨╕╤В╤М run_id ╨┤╨╗╤П ╤В╨╡╨║╤Г╤Й╨╡╨│╨╛ ╨║╨╛╨╜╤В╨╡╨║╤Б╤В╨░ (╨╗╨╛╨│╨╕)."""
+    _run_id_ctx.set(run_id)
+
+
+def get_run_id() -> Optional[str]:
+    """╨в╨╡╨║╤Г╤Й╨╕╨╣ run_id ╨╕╨╖ ╨║╨╛╨╜╤В╨╡╨║╤Б╤В╨░."""
+    return _run_id_ctx.get()
+
+
+class RunIdFilter(logging.Filter):
+    """╨Ф╨╛╨▒╨░╨▓╨╗╤П╨╡╤В run_id ╨╕ error_code ╨▓ ╨║╨░╨╢╨┤╤Г╤О ╨╖╨░╨┐╨╕╤Б╤М ╨╗╨╛╨│╨░ (╨╕╨╖ ╨║╨╛╨╜╤В╨╡╨║╤Б╤В╨░ ╨╕ extra)."""
+
+    def filter(self, record: logging.LogRecord) -> bool:
+        record.run_id = getattr(record, "run_id", None) or _run_id_ctx.get() or "-"
+        record.error_code = getattr(record, "error_code", None) or "-"
+        return True
+
+
+def setup_app_logging(
+    logs_dir: Path,
+    level: int = logging.INFO,
+    run_id: Optional[str] = None,
+) -> None:
     """╨Э╨░╤Б╤В╤А╨╛╨╕╤В╤М ╨╗╨╛╨│╨╕╤А╨╛╨▓╨░╨╜╨╕╨╡ ╨▓ `logs/app.log` ╤Б ╤А╨╛╤В╨░╤Ж╨╕╨╡╨╣.
 
     Args:
         logs_dir: ╨Ъ╨░╤В╨░╨╗╨╛╨│ ╨┤╨╗╤П ╨╗╨╛╨│╨╛╨▓.
         level: ╨г╤А╨╛╨▓╨╡╨╜╤М ╨╗╨╛╨│╨╕╤А╨╛╨▓╨░╨╜╨╕╤П (╨┐╨╛ ╤Г╨╝╨╛╨╗╤З╨░╨╜╨╕╤О INFO).
+        run_id: Correlation id ╨┤╨╗╤П ╤Н╤В╨╛╨│╨╛ ╨╖╨░╨┐╤Г╤Б╨║╨░ (╨┤╨╛╨▒╨░╨▓╨╗╤П╨╡╤В╤Б╤П ╨▓╨╛ ╨▓╤Б╨╡ ╨╖╨░╨┐╨╕╤Б╨╕).
 
     Returns:
         None.
     """
+    if run_id is not None:
+        set_run_id(run_id)
 
     logs_dir.mkdir(parents=True, exist_ok=True)
 
@@ -32,8 +64,16 @@ def setup_app_logging(logs_dir: Path, level: int = logging.INFO) -> None:
         if isinstance(h, RotatingFileHandler) and getattr(h, "baseFilename", "").endswith("app.log"):
             return
 
-    formatter = logging.Formatter("%(asctime)sZ %(levelname)s %(name)s: %(message)s")
-    # UTC timestamps, ╨║╨░╨║ ╨▓ JSON-╤Н╨║╤Б╨┐╨╛╤А╤В╨╡
+    run_filter = RunIdFilter()
+
+    class AppLogFormatter(logging.Formatter):
+        def format(self, record: logging.LogRecord) -> str:
+            base = super().format(record)
+            if getattr(record, "error_code", "-") != "-":
+                base += f" error_code={record.error_code}"
+            return base
+
+    formatter = AppLogFormatter("%(asctime)sZ %(levelname)s [%(run_id)s] %(name)s: %(message)s")
     formatter.converter = time.gmtime
 
     app_handler = RotatingFileHandler(
@@ -44,6 +84,7 @@ def setup_app_logging(logs_dir: Path, level: int = logging.INFO) -> None:
     )
     app_handler.setLevel(level)
     app_handler.setFormatter(formatter)
+    app_handler.addFilter(run_filter)
 
     err_handler = RotatingFileHandler(
         logs_dir / "errors.log",
@@ -53,6 +94,7 @@ def setup_app_logging(logs_dir: Path, level: int = logging.INFO) -> None:
     )
     err_handler.setLevel(logging.WARNING)
     err_handler.setFormatter(formatter)
+    err_handler.addFilter(run_filter)
 
     root.addHandler(app_handler)
     root.addHandler(err_handler)
